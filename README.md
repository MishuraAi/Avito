# 🤖 Avito AI Responder

## 📋 Описание проекта

**Avito AI Responder** — это умный автоответчик для платформы Авито с встроенным ИИ-консультантом на базе Google Gemini. Система предназначена для автоматизации общения с потенциальными покупателями и значительного увеличения конверсии продаж.

### ✨ Ключевые возможности

- 🧠 **ИИ-консультант**: Умные ответы на базе Google Gemini
- ⚡ **Быстрые ответы**: Автоматический ответ менее чем за 3 секунды
- 📊 **Аналитика**: Подробная статистика общения и конверсии
- 🔧 **Настройки**: Гибкая настройка стиля общения и шаблонов
- 🔄 **Автоматизация**: Полная автоматизация процесса общения
- 📱 **Веб-интерфейс**: Удобный дашборд для управления

---

## ⚡ ОБЯЗАТЕЛЬНЫЕ ПРАВИЛА РАЗРАБОТКИ

### 🔍 1. ПРАВИЛО ВСЕСТОРОННЕГО АНАЛИЗА
**ПЕРЕД ЛЮБЫМ ИЗМЕНЕНИЕМ КОДА ОБЯЗАТЕЛЬНО:**
- ✅ Провести полный анализ всех зависимостей
- ✅ Изучить влияние изменений на другие компоненты
- ✅ Предвидеть возможные ошибки и конфликты
- ✅ Проверить совместимость с существующей архитектурой
- ✅ Убедиться в соответствии общей концепции проекта

**❌ ЗАПРЕЩЕНО:** Вносить изменения без предварительного анализа

### 🏗️ 2. ПРАВИЛО КАЧЕСТВЕННОЙ РАЗРАБОТКИ
**МЫ РАБОТАЕМ ТОЛЬКО КАЧЕСТВЕННО:**
- ✅ Никаких "быстрых решений" или "костылей"
- ✅ Никаких "экстренных" правок без анализа
- ✅ Каждое решение должно быть архитектурно обоснованным
- ✅ Код должен быть расширяемым и поддерживаемым
- ✅ Всегда выбираем долгосрочное качественное решение

**❌ ЗАПРЕЩЕНО:** Временные решения, хаки, костыли

### 🧹 3. ПРАВИЛО ЧИСТОТЫ ПОСЛЕ ОШИБОК
**ПОСЛЕ КАЖДОЙ ОШИБКИ ИЛИ НЕУДАЧНОГО ИЗМЕНЕНИЯ:**
- ✅ Полностью очистить код от старых комментариев
- ✅ Удалить неиспользуемый код и импорты
- ✅ Привести код к минимальному работающему виду
- ✅ Обновить документацию если нужно
- ✅ Проверить что все функции работают корректно

**❌ ЗАПРЕЩЕНО:** Оставлять мусор в коде после исправлений

### ✨ 4. ПРАВИЛО НЕПРЕРЫВНОЙ ЧИСТКИ
**ПРИ ИЗУЧЕНИИ ЛЮБОГО ФАЙЛА:**
- ✅ Автоматически улучшать читаемость кода
- ✅ Оптимизировать импорты и структуру
- ✅ Удалять дублирующийся код
- ✅ Улучшать названия переменных и функций
- ✅ Сохранять 100% функциональности после чистки

**❌ ЗАПРЕЩЕНО:** Ломать функциональность во время рефакторинга

### 📋 5. ПРАВИЛО ОБЯЗАТЕЛЬНОГО ИСПОЛНЕНИЯ
**ВСЕ ПРАВИЛА ОБЯЗАТЕЛЬНЫ К ИСПОЛНЕНИЮ:**
- ✅ Каждое правило должно выполняться без исключений
- ✅ При возникновении сомнений - переспросить
- ✅ Лучше потратить больше времени на анализ, чем исправлять ошибки
- ✅ Качество важнее скорости разработки

**❌ ЗАПРЕЩЕНО:** Игнорировать любое из правил

### 📝 6. ПРАВИЛО ВЕДЕНИЯ СТАТУСА
**ОБЯЗАТЕЛЬНО ОБНОВЛЯТЬ СТАТУС ПРОЕКТА:**
- ✅ Указывать текущую стадию разработки
- ✅ Фиксировать выполненные задачи
- ✅ Отмечать проблемы и их решения
- ✅ Обновлять планы и следующие шаги
- ✅ Сохранять контекст для продолжения работы

### 📂 7. ПРАВИЛО ОТСЛЕЖИВАНИЯ ФАЙЛОВОЙ СТРУКТУРЫ
**ОБЯЗАТЕЛЬНО ПОДДЕРЖИВАТЬ АКТУАЛЬНУЮ СТРУКТУРУ:**
- ✅ Всегда обновлять раздел "ТЕКУЩАЯ ФАЙЛОВАЯ СТРУКТУРА" в project.md
- ✅ Указывать какие файлы существуют на данный момент
- ✅ Отмечать новые, измененные и удаленные файлы
- ✅ Поддерживать понимание всех зависимостей между файлами

### 🗂️ 8. ПРАВИЛО ЯВНОГО УКАЗАНИЯ ФАЙЛОВ
**ПРИ ЛЮБЫХ ОПЕРАЦИЯХ С ФАЙЛАМИ:**
- ✅ Всегда указывать полный путь где должен находиться файл
- ✅ Явно называть какой файл изменяется или создается
- ✅ Пояснять является ли операция созданием нового или изменением существующего
- ✅ Указывать местоположение относительно корня проекта

---

## 🚀 Быстрый старт

### Требования

- Python 3.11+
- PostgreSQL 13+
- Redis 6+
- Node.js 18+ (для фронтенда)
- Google Gemini API ключ

### Установка для разработки

1. **Клонирование репозитория**
```bash
git clone https://github.com/your-username/avito-ai-responder.git
cd avito-ai-responder
```

2. **Создание виртуального окружения**
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# или
venv\Scripts\activate     # Windows
```

3. **Установка зависимостей**
```bash
pip install -r requirements-dev.txt
```

4. **Настройка переменных окружения**
```bash
cp .env.example .env
# Отредактируйте .env файл с вашими настройками
```

5. **Инициализация базы данных**
```bash
# Автоматическая инициализация миграций
python scripts/init_migrations.py

# Применение миграций
alembic upgrade head
```

6. **Запуск сервера разработки**
```bash
uvicorn src.api.main:app --reload --host 0.0.0.0 --port 8000
```

### Установка для продакшена

Используйте Docker Compose для простого развертывания:

```bash
docker-compose -f docker/docker-compose.prod.yml up -d
```

## 🏗️ Архитектура

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Web Frontend  │    │   FastAPI API   │    │  Background     │
│   (React)       │◄──►│   (Python)      │◄──►│  Tasks (Celery) │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                │
                                ▼
                       ┌─────────────────┐
                       │   PostgreSQL    │
                       │   Database      │
                       └─────────────────┘
                                │
                ┌───────────────┼───────────────┐
                ▼               ▼               ▼
    ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐
    │  Avito API      │ │  Google Gemini  │ │  Redis Cache    │
    │  Integration    │ │  AI Service     │ │  & Sessions     │
    └─────────────────┘ └─────────────────┘ └─────────────────┘
```

## 📁 Структура проекта

```
src/
├── core/                   # Ядро системы (ИИ, обработка сообщений)
├── integrations/           # Интеграции (Avito API, Gemini)
├── api/                    # FastAPI роуты и middleware
├── database/               # Модели и CRUD операции
├── services/               # Бизнес-логика
└── utils/                  # Вспомогательные утилиты

scripts/                    # Скрипты управления
migrations/                 # Alembic миграции БД
frontend/                   # React приложение
tests/                      # Тесты
docker/                     # Docker конфигурации
```

## ⚙️ Конфигурация

### Основные переменные окружения

```env
# Основные настройки
DEBUG=True
SECRET_KEY=your-secret-key-here
ENVIRONMENT=development

# База данных
DATABASE_URL=postgresql://user:password@localhost:5432/avito_ai
REDIS_URL=redis://localhost:6379/0

# API ключи
GEMINI_API_KEY=your-gemini-api-key
AVITO_CLIENT_ID=your-avito-client-id
AVITO_CLIENT_SECRET=your-avito-client-secret

# Настройки безопасности
CORS_ORIGINS=http://localhost:3000,http://localhost:8000
JWT_SECRET_KEY=your-jwt-secret
```

## 🧪 Тестирование

Запуск всех тестов:
```bash
pytest
```

Запуск с покрытием кода:
```bash
pytest --cov=src --cov-report=html
```

Запуск конкретной категории тестов:
```bash
pytest tests/unit/          # Юнит тесты
pytest tests/integration/   # Интеграционные тесты
pytest tests/e2e/          # End-to-end тесты
```

## 📊 Мониторинг и логирование

- **Логи**: Все логи сохраняются в `data/logs/`
- **Метрики**: Prometheus метрики доступны на `/metrics`
- **Здоровье системы**: Health check на `/health`
- **Документация API**: Swagger UI на `/docs`

## 🚀 Деплой

### Railway (для разработки)

1. Создайте новый проект на Railway
2. Подключите GitHub репозиторий
3. Настройте переменные окружения
4. Система автоматически развернется

### Timeweb (для продакшена)

```bash
# Сборка и деплой
python scripts/deploy.py --environment production
```

## 📈 Производительность

### Целевые метрики

- ⚡ **Время ответа**: < 3 секунд
- 🎯 **Точность ИИ**: > 85%
- 🚀 **Uptime**: > 99.5%
- 📊 **Пропускная способность**: 10,000 сообщений/день

### Оптимизация

- Кеширование ответов в Redis
- Асинхронная обработка сообщений
- Пул соединений к базе данных
- CDN для статических файлов

## 🔒 Безопасность

- ✅ JWT аутентификация
- ✅ Rate limiting для API
- ✅ Валидация всех входных данных
- ✅ CORS политики
- ✅ SQL injection защита
- ✅ XSS защита

## 🎯 ЦЕЛИ И МЕТРИКИ

### 📊 ТЕХНИЧЕСКИЕ ЦЕЛИ:
- ⏱️ Время ответа бота: < 3 секунд
- 🎯 Точность ИИ-ответов: > 85%
- 🚀 Uptime системы: > 99.5%
- 📈 Масштабируемость: до 10000 сообщений/день

### 💰 БИЗНЕС-ЦЕЛИ:
- 🎪 Первые продажи: в течение 3 месяцев
- 💵 Целевая цена: 25,000 - 75,000₽ за лицензию
- 📈 Конверсия демо → продажа: > 15%
- 🏆 Количество клиентов: 50+ в первый год

## 🛠️ ТЕХНИЧЕСКИЙ СТЕК

### 🐍 Backend:
- **Python 3.11+** - основной язык
- **FastAPI** - веб-фреймворк
- **SQLAlchemy** - ORM для базы данных
- **PostgreSQL** - основная база данных
- **Redis** - кеширование и очереди
- **Alembic** - миграции базы данных

### 🧠 ИИ и автоматизация:
- **Google Gemini** - ИИ-консультант
- **Selenium** - автоматизация браузера
- **BeautifulSoup** - парсинг HTML

### 🌐 Frontend:
- **React** - веб-интерфейс
- **Tailwind CSS** - стилизация
- **Chart.js** - графики и аналитика

### ☁️ Инфраструктура:
- **Docker** - контейнеризация
- **Railway** - хостинг для разработки
- **Timeweb** - продакшен хостинг
- **GitHub** - версионирование кода

## 🤝 Вклад в проект

1. Форкните репозиторий
2. Создайте feature ветку: `git checkout -b feature/amazing-feature`
3. Сделайте коммит: `git commit -m 'Add amazing feature'`
4. Push в ветку: `git push origin feature/amazing-feature`
5. Откройте Pull Request

### Стандарты кода

- Используйте `black` для форматирования
- Проверяйте код с `flake8`
- Добавляйте тесты для новой функциональности
- Обновляйте документацию

## 📝 Документация

- **API документация**: `/docs` (Swagger UI)
- **Архитектура**: `docs/architecture.md`
- **Деплой гайды**: `docs/deployment/`
- **Разработка**: `docs/development/`

## 🔗 ПОЛЕЗНЫЕ ССЫЛКИ

- **API Авито:** https://developers.avito.ru/
- **Gemini API:** https://makersuite.google.com/
- **Railway:** https://railway.app/
- **SQLAlchemy:** https://docs.sqlalchemy.org/
- **Alembic:** https://alembic.sqlalchemy.org/
- **FastAPI:** https://fastapi.tiangolo.com/
- **GitHub репозиторий:** [будет создан]

## ⚠️ ПРЕДУПРЕЖДЕНИЯ И ОГРАНИЧЕНИЯ

1. **API Авито:** Требует платный тариф для полной функциональности
2. **Gemini API:** Необходим действующий ключ API
3. **PostgreSQL:** Требует настройки подключения и запуска миграций
4. **Alembic:** Нужно инициализировать репозиторий миграций
5. **Юридические аспекты:** Соблюдение пользовательских соглашений

## 📞 КОНТАКТЫ И ЗАМЕТКИ

### 👥 Команда проекта:
- **Архитектор/Разработчик:** Claude (ИИ-ассистент)
- **Заказчик:** [Ваше имя]

### 📝 ВАЖНЫЕ ЗАМЕТКИ:
- Все изменения должны быть согласованы
- Каждый компонент должен быть тестируемым
- Документация обновляется с каждым изменением
- Безопасность - приоритет номер один

## 📞 Поддержка

- 📧 **Email**: support@avito-ai-responder.com
- 💬 **Issues**: GitHub Issues
- 📖 **Wiki**: GitHub Wiki
- 🆘 **FAQ**: `docs/faq.md`

## 📄 Лицензия

Этот проект лицензирован под MIT License - смотрите файл [LICENSE](LICENSE) для деталей.

## 🏆 Авторы

- **Главный разработчик**: [Ваше имя]
- **ИИ Архитектор**: Claude (Anthropic)

## 🙏 Благодарности

- Google Gemini AI за мощный ИИ API
- Avito за открытые API возможности
- Сообщество Python за отличные библиотеки

---

**🔥 Статус проекта**: В активной разработке  
**📅 Последнее обновление**: Январь 2025  
**🎯 Версия**: 0.1.0-alpha

> **ℹ️ Примечание**: Для актуального статуса разработки, выполненных задач и планов смотрите файл `project.md`